# BurritoSuicide Hyprland Config
# https://github.com/BurritoSuicide/hyprdots
# For help styling, see https://wiki.hyprland.org

# Monitors
    monitor=DP-3,3840x2160@60,0x0,1

# General settings
    input {
        kb_layout = us
        kb_variant =
        kb_model =
        kb_options =
        kb_rules =

        follow_mouse = 1

        touchpad {
            natural_scroll = no
        }

        sensitivity = 0 # -1.0 - 1.0, 0 means no modification.
    }

    # Change RGB values to rainbow border color preferences.
    general {
        gaps_in = 5
        gaps_out = 5
        border_size = 5
        col.active_border = rgba(00ffaa99) rgb(bf00ff)
        col.inactive_border = rgb(8a9fbf) rgb(949494)
        layout = dwindle
        bezier = wind, 0.05, 0.9, 0.1, 1.05
        bezier = winIn, 0.1, 1.1, 0.1, 1.1
        bezier = winOut, 0.3, -0.3, 0, 1
        bezier = linear, 0.0, 0.0, 1.0, 1.0
    }

    decoration {
        rounding = 10

        blur {
            enabled = true
            size = 3
            passes = 1
        }

        animation = windowsIn, 1, 6, winIn, slide
        animation = windowsOut, 1, 5, winOut, slide
        animation = windowsMove, 1, 5, wind, slide
        animation = border, 1, 10, default
        animation = borderangle, 1, 100, linear, loop
        animation = fade, 1, 10, default
        animation = workspaces, 1, 5, wind
        animation = windows, 1, 6, wind, slide
        bezier = myBezier, 0.05, 0.9, 0.1, 1.05
        animation = windows, 1, 7, myBezier
    }

    dwindle {
        pseudotile = yes
        preserve_split = yes
    }

    misc {
        # Waifus? (set 0 if no)
        force_default_wallpaper = -1
    }

# Variables
    # Keybind variables
    $super = SUPER
    $enter = RETURN
    $super_shift = SUPER SHIFT
    $alt_shift = ALT SHIFT

    # Application variables (provide arguments if needed)
    $terminal = foot
    $fileManager = thunar
    $menu = wofi --show drun
    $editorIDE = code
    $browser = firefox
    $webcord = webcord
    $lutris = lutris
    $steam = steam
    $bar = sfwbar
    $barPref = sfwbar -f .config/sfwbar/test.config
    $screenshot = hyprshot -m region --clipboard-only
    $wallpaper = hyprpaper
    $notificationDaemon = swaync

# Bindings
    # Application bindings
    bind = SUPER, SUPER_L, exec, caelestia shell drawers toggle launcher
    bind = $super, RETURN, exec, app2unit -- $terminal
    bind = $super_shift, D, exec, ~/.config/hypr/scripts/desktop-cycle.sh
    bind = $super_shift, F, exec, $fileManager
    bind = $super_shift, K, exec, $editorIDE
    bind = $super_shift, O, exec, $browser
    bind = $super_shift, W, exec, $webcord
    bind = $super_shift, G, exec, $lutris
    bind = $super_shift, S, exec, $steam

    # Launchers, bars, additions
    bind = $super, Z, exec, sh -c "~/.config/hypr/scripts/bemenu-run.sh"
    bind = $super, S, exec, $screenshot
    bind = $super_shift, E, exec, $barPref
    bind = $super_shift, M, exec, killall $bar

    # Fullscreen stuff
    bind = $super, F, fullscreen, 1

    #Toggle Tabs
    bind = $super, T, togglegroup

    # Exit Hyprland
    bind = $super_shift, L, exec, hyprctl dispatch exit

    #Misc Volume things
    bind = $super, P, exec, sh -c "mpv --audio-device=pulse ~/Prowler.m4a"

# Execute once when logging in
    # Scripts
    exec-once = ~/.config/hypr/scripts/animatedborders.sh

    # Applications
    exec-once = $notificationDaemon
    # Piano
    exec-once = fluidsynth -a pulseaudio -m alsa_seq -g 2.0 -o synth.reverb.active=yes -o synth.chorus.active=yes /nix/store/$(ls /nix/store | grep GeneralUser.*sf2 | head -n 1) & sleep 3 && aconnect 28:0 128:0

    # QT fixes
        # Import environment
        exec-once = systemctl --user import-environment WAYLAND_DISPLAY XDG_CURRENT_DESKTOP XDG_SESSION_TYPE QT_QPA_PLATFORMTHEME
        exec-once = dbus-update-activation-environment --systemd WAYLAND_DISPLAY XDG_CURRENT_DESKTOP XDG_SESSION_TYPE QT_QPA_PLATFORMTHEME
        exec-once = systemctl --user start graphical-session.target
        # Caelestia service starts automatically via systemd dependency on graphical-session.target
        
        # Set KDE environment for KDE applications
        exec-once = dbus-update-activation-environment --systemd KDE_FULL_SESSION

        # XDG Desktop Environment (include KDE for KDE apps like Dolphin)
        env = XDG_CURRENT_DESKTOP,Hyprland:KDE
        env = XDG_SESSION_TYPE,wayland
        env = XDG_SESSION_DESKTOP,Hyprland
        env = KDE_FULL_SESSION,1

        # QT theming (use qt6ct for Qt6 apps like Dolphin)
        env = QT_QPA_PLATFORM,wayland
        env = QT_QPA_PLATFORMTHEME,qt6ct
        env = QT_WAYLAND_DISABLE_WINDOWDECORATION,1
        env = QT_AUTO_SCREEN_SCALE_FACTOR,1
        env = QT_STYLE_OVERRIDE,kvantum

# Window management
# Hyprload split monitors

exec-once = hyprpm reload

plugin {
    split-monitor-workspaces {
        count = 2
    }
}

# Binding for windows, workspace commands
    bind = $super, Q, pseudo,
    bind = $super, V, togglefloating,
    bind = $super_shift, Q, killactive,

    # Minecraft tiling
    windowrulev2 = tile,class:(Minecraft*)
    windowrulev2 = tile,class:(steam_app_2088840)
    windowrulev2 = animation slide, class:^(wofi)$
    # Kando window rules
    windowrule = noblur, class:kando
    windowrule = opaque, class:kando
    windowrule = size 100% 100%, class:kando
    windowrule = noborder, class:kando
    windowrule = noanim, class:kando
    windowrule = float, class:kando
    windowrule = pin, class:kando
    bind = $super_shift, SPACE, exec, kando -m "MainMenu"
    windowrulev2 = float, class:eww, monitor:DP-3
   # Move focus with Super + arrow keys (Requires split-monitor-workspaces to be installed and hyprload)
    bind = $super, left, movefocus, l
    bind = $super, right, movefocus, r

    # Move windows, similar to i3wm ($super_shift + Arrow)
    bind = $super_shift, left, changegroupactive, b
    bind = $super_shift, right, changegroupactive, f

    # Vertical Workspace Transition
    animation = workspaces,1, 5,default,slidevert

    # Scroll through existing workspaces with Super + scroll
    bind = $super, mouse_down, workspace, e+1
    bind = $super, mouse_up, workspace, e-1

    # [MOVE] Scroll through existing workspaces with Super + scroll
    bind = $super_shift, down, workspace, +1
    bind = $super_shift, up, workspace, -1
    bind = $alt_shift, down, movetoworkspace, +1
    bind = $alt_shift, up, movetoworkspace, -1

    # Move/resize windows with Super + LMB/RMB and dragging
    bindm = $super, mouse:272, movewindow
    bindm = $super, mouse:273, resizewindow

    # Example special workspace (scratchpad)
    bind = $super, I, togglespecialworkspace, magic
    bind = $super SHIFT, I, movetoworkspace, special:magic
